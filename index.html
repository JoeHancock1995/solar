<!DOCTYPE html>
 <html>
    <head>		
		<title>Solar System</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <style>
		body { margin: 0; }
		canvas { width: 100%; height: 100% }
		#info {
				position: absolute;
				top: 0px;
				width: 100%;
				color: #ffffff;
				padding: 5px;
				font-family:Monospace;
				font-size:13px;
				text-align:right;
			}
	  </style>
	      <script src="js/three.min.js"></script>
		  <script src="js/OrbitControls.js"></script>
		  <script src="js/GLTFLoader.js"></script>
		  <script src="js/AnimationMixer.js"></script>
		  <script src="js/stats.min.js"></script>
		  <script src="js/CSS2DRenderer.js"></script>
		  <script src="js/libs/dat.gui.min.js"></script>
		  
  </head>
    <body>

	<div id="info">
	</div>
	<script>		
	
 	// Load 3D Scene
	var scene = new THREE.Scene(); 
	scene2 = new THREE.Scene();
	var Stats;
	var innerw,height;
	var clock = new THREE.Clock();
	var stars=[];
	var gui, controlConfig= {
	freezState: false,
	revolveSpeed: 24
	};


 	// Load Camera Perspective
	var camera = new THREE.PerspectiveCamera( 25, window.innerWidth / window.innerHeight, 1, 20000 );
	camera.position.set( 0, 0, 100 );
	
	// Load a Renderer
	var renderer = new THREE.WebGLRenderer({antialias: true});
	renderer.setClearColor( 0x000000 );
	renderer.setPixelRatio( window.devicePixelRatio );
	renderer.setSize(window.innerWidth, window.innerHeight);
	innerw=window.innerWidth;
	height=window.innerHeight;

	document.body.appendChild(renderer.domElement);
		
 	// Load the Orbitcontroller
	var controls = new THREE.OrbitControls( camera, renderer.domElement ); 
			
 	// Load Light
	var ambientLight = new THREE.AmbientLight( 0xffffff );
	scene.add( ambientLight );
			
	var directionalLight = new THREE.DirectionalLight( 0xffffff );
	directionalLight.position.set( 0, 1, 1 ).normalize();
	scene.add( directionalLight );	

	function addSphere(){

		// The loop will move from z position of -1000 to z position 1000, adding a random particle at each position. 
		for ( var z= -1000; z < 1000; z+=20 ) {

		// Make a sphere (exactly the same as before). 
		var geometry   = new THREE.SphereGeometry(0.5, 32, 32)
		var material = new THREE.MeshBasicMaterial( {color: 0xffffff} );
		var sphere = new THREE.Mesh(geometry, material)

		// This time we give the sphere random x and y positions between -500 and 500
		//sphere.position.x = Math.random() * 1500 - 1400;
		//sphere.position.y = Math.random() * 2000 - 1000;
		//sphere.position.z = Math.random() * 5000 - 1000;
		sphere.position.x= Math.random()*innerw-Math.random()*innerw;
		sphere.position.y=Math.random()*height-Math.random()*height;
		
		// Then set the z position to where it is in the loop (distance of camera)
		sphere.position.z = z;	
		// scale it up a bit
		sphere.scale.x = sphere.scale.y = 1;

		//add the sphere to the scene
		scene.add( sphere );

			//finally push it to the stars array 
			stars.push(sphere); 
		}
	}

	function animateStars() { 
				
				// loop through each star
				for(var i=0; i<stars.length; i++) {
					
					star = stars[i]; 
						
					// and move it forward dependent on the mouseY position. 
					star.position.z +=  i/10;
						
					// if the particle is too close move it to the back
					if(star.position.z>2000) star.position.z-=3000; 
					
				}
			
	}
				

	
 	// glTf 2.0 Loader
	var loader = new THREE.GLTFLoader();
	// Planets variables;
	var sun,mercury,venus,earth,mars,jupiter,saturn,neptune;	

	var morbit;		


	loader.load( 'model/sun/sun.gltf', function ( gltf ) {           //   <<--------- Model Path
	sun = gltf.scene;			
	gltf.scene.scale.set( 12, 12, 12 );			   
	gltf.scene.position.x = 0;				    //Position (x = right+ left-) 
    gltf.scene.position.y = -3;				    //Position (y = up+, down-)
	gltf.scene.position.z = 0;				    //Position (z = front +, back-)
	//gltf.animations;
	scene.add( gltf.scene );
	});

	loader.load( 'model/mercury/mercury.gltf', function ( gltf ) {           //   <<--------- Model Path
	mercury = gltf.scene;			
	gltf.scene.scale.set( 1, 1, 1 );			   
	gltf.scene.position.x = 3;				    //Position (x = right+ left-) 
    gltf.scene.position.y = 2;				    //Position (y = up+, down-)
	gltf.scene.position.z = 0;				    //Position (z = front +, back-)
	//gltf.animations;
	scene.add( gltf.scene);
	var shape = new THREE.Shape();
    shape.moveTo(20, 0);
    shape.absellipse(0, 0, 20, 30, 0, 2 * Math.PI, false);
    var spacedPoints = shape.createSpacedPointsGeometry(128);
	print(spacedPoints);
    spacedPoints.rotateX(THREE.Math.degToRad(-100));
    morbit = new THREE.Line(spacedPoints, new THREE.LineBasicMaterial({
      color: "white"
    	}));
    scene.add(morbit);
	});

	loader.load( 'model/venus/venus.gltf', function ( gltf ) {           //   <<--------- Model Path
	venus = gltf.scene;
	gltf.scene.scale.set( 1, 1, 1 );			   
	gltf.scene.position.x = 4;				    //Position (x = right+ left-) 
    gltf.scene.position.y = 2;				    //Position (y = up+, down-)
	gltf.scene.position.z = 0;				    //Position (z = front +, back-)
	gltf.animations;
	scene.add( gltf.scene);
	//orbit
    var shape = new THREE.Shape();
    shape.moveTo(10, 0);
    shape.absellipse(0, 0, 30, 40, 0, Math.sin( elapsed/2 ) * 7, false);
    var spacedPoints = shape.createSpacedPointsGeometry(128);
    spacedPoints.rotateX(THREE.Math.degToRad(-90));
    var orbit = new THREE.Line(spacedPoints, new THREE.LineBasicMaterial({
      color: "white"
    	}));
    scene.add(orbit);
	});

	loader.load( 'model/earth/earth.gltf', function ( gltf ) {           //   <<--------- Model Path
	earth = gltf.scene;			
	gltf.scene.scale.set( 1, 1, 1 );			   
	gltf.scene.position.x = 5;				    //Position (x = right+ left-) 
    gltf.scene.position.y = 2;				    //Position (y = up+, down-)
	gltf.scene.position.z = 0;				    //Position (z = front +, back-)
	//gltf.animations;
	scene.add( gltf.scene);
	});

	loader.load( 'model/mars/mars.gltf', function ( gltf ) {           //   <<--------- Model Path
	mars = gltf.scene;			
	gltf.scene.scale.set( 1, 1, 1 );			   
	gltf.scene.position.x = 6;				    //Position (x = right+ left-) 
    gltf.scene.position.y = 2;				    //Position (y = up+, down-)
	gltf.scene.position.z = 0;				    //Position (z = front +, back-)
	//gltf.animations;
	scene.add( gltf.scene);
	});

	loader.load( 'model/jupiter/jupiter.gltf', function ( gltf ) {           //   <<--------- Model Path
	jupiter = gltf.scene;			
	gltf.scene.scale.set( 4, 4, 4 );			   
	gltf.scene.position.x = 9;				    //Position (x = right+ left-) 
    gltf.scene.position.y = 2;				    //Position (y = up+, down-)
	gltf.scene.position.z = 0;				    //Position (z = front +, back-)
	//gltf.animations;
	scene.add( gltf.scene);
	});

	

	loader.load( 'model/saturn/saturn.gltf', function ( gltf ) {           //   <<--------- Model Path
	saturn = gltf.scene;			
	gltf.scene.scale.set( 2, 2, 2 );			   
	gltf.scene.position.x = 11;				    //Position (x = right+ left-) 
    gltf.scene.position.y = 2;				    //Position (y = up+, down-)
	gltf.scene.position.z = 0;				    //Position (z = front +, back-)
	//gltf.animations;
	scene.add( gltf.scene);
	});

	loader.load( 'model/neptune/neptune.gltf', function ( gltf ) {           //   <<--------- Model Path
	neptune = gltf.scene;			
	gltf.scene.scale.set( 1, 1, 1 );			   
	gltf.scene.position.x = 13;				    //Position (x = right+ left-) 
    gltf.scene.position.y = 2;				    //Position (y = up+, down-)
	gltf.scene.position.z = 0;				    //Position (z = front +, back-)
	gltf.animations;
	scene.add( gltf.scene);
	});
	



	// FPS stats
	stats = new Stats();
	document.body.appendChild( stats.dom );
	window.addEventListener( 'resize', onWindowResize, false );


	gui = new dat.GUI( { width: 350 } );


	// Controls

	var controlGUI = gui.addFolder( "Controls" );

	controlGUI.add( controlConfig, 'freezState' ).onChange( function() 
	{

		//shadowCameraHelper.visible = shadowConfig.shadowCameraVisible;

	});

	controlGUI.add( controlConfig, 'revolveSpeed', 1, 24 ).onChange( function() 
	{
		//sunLight.shadow.camera.near = shadowConfig.shadowCameraNear;
		//sunLight.shadow.camera.updateProjectionMatrix();
		//shadowCameraHelper.update();

	});
	


	function onWindowResize( event ) 
	{
	camera.aspect = window.innerWidth / window.innerHeight;
	camera.updateProjectionMatrix();
	renderer.setSize( window.innerWidth, window.innerHeight );
	//controls.handleResize();
	}
	

	function animate() 
	{
	requestAnimationFrame( animate );
	renderer.render( scene, camera );
	animateStars();
	revolvePlanet();
	stats.update();
	}



	function revolvePlanet(){
		var elapsed = clock.getElapsedTime();
		if (mercury)
		{ 	mercury.rotation.y+=0.05;
			//mercury.position.set(Math.PI,5,2 * Math.PI);
			mercury.position.set(Math.sin( elapsed/2 ) * 7, 1, Math.cos( elapsed/2 ) * 7);
		}
		if (venus) 
		{	
			venus.rotation.y+=0.04;
			venus.position.set(Math.sin( elapsed/3) * 9, 1, Math.cos( elapsed/3 ) * 9);
		}
		if (earth)
		{ 	
			earth.rotation.y+=0.009;
			earth.position.set(Math.sin( elapsed/4 ) * 12, 2, Math.cos( elapsed/4 ) * 12);
		}
		if (mars) 
		{	
			mars.rotation.y+=0.008;
			mars.position.set(Math.sin( elapsed/5 ) * 16, 2, Math.cos( elapsed/5 ) * 16);
		}
		if (jupiter) 
		{	
			jupiter.rotation.y+=0.004;
			jupiter.position.set(Math.sin( elapsed/7 ) * 20, 2, Math.cos( elapsed/7 ) * 20);
		}
		if (saturn) 
		{	
			saturn.rotation.y+=0.003;
			saturn.position.set(Math.sin( elapsed/9 ) * 27, 2, Math.cos( elapsed/9 ) * 27);
		}
		if (neptune) 
		{	
			neptune.rotation.y+=0.002;
			neptune.position.set(Math.sin( elapsed/11 ) * 35, 2, Math.cos( elapsed/11 ) * 35);
		}
	}
	addSphere();
	animate();
			
</script>	
</body>
</html>